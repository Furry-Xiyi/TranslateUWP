<!-- MainPage.xaml -->
<Page
 x:Class="TranslatorApp.MainPage"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:local="using:TranslatorApp"
 Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>

 <!-- 自定义标题栏：应用图标 + 名称 + 搜索/操作区 -->
 <Grid x:Name="TitleBar" Padding="12,8" Background="{ThemeResource SystemControlAcrylicWindowBrush}">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="Auto"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
 </Grid.ColumnDefinitions>

 <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
 <Image Source="ms-appx:///Assets/Square44x44Logo.targetsize-44.png" Width="20" Height="20"/>
 <TextBlock x:Name="AppDisplayNameText" x:Uid="AppDisplayName" FontSize="14" VerticalAlignment="Center"/>
 </StackPanel>

 <!-- 中间区域：搜索栏（根据页面显示/隐藏） -->
 <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
 <ComboBox x:Name="SearchEngineCombo" MinWidth="160" SelectionChanged="SearchEngineCombo_SelectionChanged">
 <ComboBoxItem Content="本地词典"/>
 <ComboBoxItem Content="Bing词典"/>
 <ComboBoxItem Content="Youdao词典"/>
 <ComboBoxItem Content="百度词典"/>
 </ComboBox>
 <AutoSuggestBox x:Name="GlobalSearchBox" x:Uid="GlobalSearchBox" Width="480"
 QueryIcon="Find"
 TextChanged="GlobalSearchBox_TextChanged"
 QuerySubmitted="GlobalSearchBox_QuerySubmitted"/>
 <Button x:Name="ClearSearchButton" Content="✕" Visibility="Collapsed"
 Click="ClearSearchButton_Click"
 Style="{StaticResource ButtonRevealStyle}"/>
 </StackPanel>

 <!--右侧：GoBack + 设置（放在标题栏右侧，与系统按钮并列） -->
 <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
 <Button x:Name="GoBackButton" Content="←" Click="GoBackButton_Click" Style="{StaticResource ButtonRevealStyle}"/>
 <Button x:Name="SettingsButton" Content="⚙" Click="SettingsButton_Click" Style="{StaticResource ButtonRevealStyle}"/>
 </StackPanel>
 </Grid>

 <!-- 主体：NavigationView侧栏导航 -->
 <muxc:NavigationView Grid.Row="1"
 x:Name="NavView"
 IsSettingsVisible="True"
 SelectionChanged="NavView_SelectionChanged"
 BackRequested="NavView_BackRequested"
 IsBackEnabled="True"
 IsPaneOpen="True">
 <muxc:NavigationView.MenuItems>
 <muxc:NavigationViewItem x:Name="NavLookup" x:Uid="NavLookup" Content="查词翻译" Icon="Find" Tag="Lookup"/>
 <muxc:NavigationViewItem x:Name="NavTranslate" x:Uid="NavTranslate" Content="互译" Icon="Refresh" Tag="Translate"/>
 <muxc:NavigationViewItem x:Name="NavFavorites" x:Uid="NavFavorites" Content="收藏" Icon="Favorite" Tag="Favorites"/>
 </muxc:NavigationView.MenuItems>

 <Frame x:Name="ContentFrame" Navigated="ContentFrame_Navigated"/>
 </muxc:NavigationView>

 <!-- 顶部 InfoBar 覆盖层 -->
 <Grid x:Name="InfoBarOverlay" Grid.RowSpan="2"
 HorizontalAlignment="Stretch" VerticalAlignment="Top"
 IsHitTestVisible="False" Margin="0,8,0,0">
 <muxc:InfoBar x:Name="TopInfoBar" IsOpen="False" IsClosable="False"
 Severity="Informational" HorizontalAlignment="Center"
 MaxWidth="980" RenderTransformOrigin="0.5,0">
 <muxc:InfoBar.RenderTransform>
 <TranslateTransform Y="-80"/>
 </muxc:InfoBar.RenderTransform>
 </muxc:InfoBar>
 </Grid>
 </Grid>
</Page>